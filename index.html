<!-- Hello World -->
<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    HELLO GUYS WELCOME TO INSTAGRAM
    <p><a
            href="https://api.instagram.com/oauth/authorize?client_id=1062308427452127&redirect_uri=https://sachinnegi5.github.io/&scope=user_profile,user_media&response_type=code">Visit
            our HTML tutorial</a></p>
    <button onclick="myFunction() ;return false">Click me</button>
    <button onclick="getUserInfoFunction() ;return false">Get user name</button>
</body>
<script>
    let redirectUri = 'https://sachinnegi5.github.io/'
    let appId = '1062308427452127'
    let appSecret = 'da4708c90c702db8c55d57f6c6389e68'
    let code, accessToken, userId
    function myFunction() {
        var url = window.location.href
        url = new URL(url);
        code = url.searchParams.get("code")
        console.log(code)


        var form = new FormData();
        form.append("client_id", appId);
        form.append("client_secret", appSecret);
        form.append("grant_type", "authorization_code");
        form.append("redirect_uri", redirectUri);
        form.append("code", code);
        var settings = {
            "async": true,
            "crossDomain": true,
            "url": "https://api.instagram.com/oauth/access_token",
            "method": "POST",
            "headers": {},
            "processData": false,
            "contentType": false,
            "mimeType": "multipart/form-data",
            "data": form
        }
        $.ajax(settings).done(function (response) {
            console.log(response);
            accessToken = response.access_token
            userId = response.user_id
        });

    }
    function getUserInfoFunction() {
        var newSettings = {
            "async": true,
            "crossDomain": true,
            "url": "https://graph.instagram.com/" + userId + "?fields=id,username&access_token=" + accessToken,
            "method": "GET",
            "headers": {}
        }

        $.ajax(newSettings).done(function (response) {
            console.log(response);
        });

    }



</script>

</html>